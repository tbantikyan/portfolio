<template>
  <div
    class="z-50 max-w-screen fixed left-0 top-0 flex h-20 w-screen items-center justify-between bg-inherit px-8 text-3xl text-inherit drop-shadow dark:bg-inherit dark:text-inherit sm:h-16 sm:px-10 md:px-12 lg:px-20"
  >
    <!-- site logo -->
    <div
      class="scale-150 bg-inherit text-inherit dark:bg-inherit dark:text-inherit"
      id="site-logo-container"
    >
      <svg
        viewBox="128.7868 174.6246 262.5984 112.3066"
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        class="size-8"
      >
        <path
          d="M 243.133 257.416 C 244.157 255.853 248.005 250.311 254.676 240.79 L 256.542 238.006 L 258.444 235.37 C 259.956 233.221 261.096 231.586 261.865 230.463 C 264.218 227.094 265.706 224.945 266.328 224.017 L 267.371 222.479 L 268.414 220.941 L 269.237 219.696 C 274.164 212.274 277.315 206.878 278.692 203.509 C 281.74 197.162 282.908 191.693 282.197 187.103 C 282.062 186.273 281.848 185.467 281.555 184.686 L 281.5 184.613 C 281.243 184.076 280.955 183.563 280.638 183.075 C 280.381 182.733 280.076 182.391 279.722 182.049 C 279.245 181.61 278.714 181.195 278.128 180.804 C 274.635 178.558 270.197 177.752 264.814 178.387 C 258.003 179.266 249.913 183.319 240.543 190.546 C 237.636 187.713 235.175 186.322 233.161 186.371 C 232.868 186.371 232.343 186.615 231.587 187.103 L 230.726 187.616 C 230.397 187.763 230.153 187.86 229.994 187.909 C 229.371 188.056 228.426 188.715 227.157 189.886 C 220.045 196.673 204.063 219.159 179.211 257.342 C 177.906 259.051 176.35 260.785 174.545 262.543 C 163.468 273.48 154.609 278.558 147.968 277.777 C 145.588 277.533 143.708 276.556 142.327 274.847 C 141.191 273.529 140.598 272.186 140.548 270.819 C 140.311 263.934 149.108 248.724 166.939 225.189 C 172.562 217.718 178.88 209.711 185.893 201.166 C 188.064 198.529 190.296 195.844 192.589 193.109 C 192.992 192.67 193.4 192.206 193.815 191.717 L 194.254 191.131 L 194.748 190.619 C 195.321 189.886 195.669 189.471 195.791 189.374 C 198.377 186.444 198.992 183.88 197.635 181.683 L 191.791 177.215 C 190.436 176.19 188.769 176.019 186.792 176.703 C 184.973 177.338 182.905 178.192 180.587 179.266 C 177.829 180.536 175.059 181.952 172.276 183.514 C 165.065 187.567 158.769 192.059 153.389 196.991 C 153.133 197.235 152.956 197.65 152.859 198.236 L 152.731 199.042 L 152.731 199.335 L 152.732 199.628 C 152.672 201.239 153.216 202.582 154.364 203.656 C 155.634 204.828 157.27 205.219 159.272 204.828 C 159.528 204.779 159.882 204.633 160.334 204.388 C 160.737 204.144 161.084 203.924 161.377 203.729 C 162.829 202.606 164.165 201.557 165.385 200.58 C 165.873 200.189 166.343 199.774 166.794 199.335 C 167.148 199.09 167.538 198.797 167.965 198.456 C 169.332 197.284 170.253 196.527 170.729 196.185 C 171.009 196.038 171.412 195.794 171.937 195.453 L 172.577 194.94 L 173.126 194.501 C 173.956 193.915 174.157 193.988 173.73 194.72 L 172.944 195.819 C 172.431 196.307 171.358 197.577 169.724 199.628 C 167.76 202.02 165.65 204.705 163.394 207.684 C 157.076 215.985 151.423 224.066 146.436 231.927 C 131.267 255.756 125.876 271.601 130.263 279.462 C 132.182 282.929 136.51 284.857 143.249 285.248 C 148.987 285.541 154.126 284.808 158.665 283.05 C 160.776 282.22 163.101 280.926 165.639 279.169 C 165.408 280.096 165.268 280.853 165.219 281.439 C 165.171 281.83 165.159 282.171 165.183 282.464 C 165.184 282.855 165.282 283.148 165.477 283.343 C 167.078 285.345 169.764 286.517 173.536 286.859 C 174.305 286.908 175.007 286.639 175.641 286.053 L 175.733 285.98 L 178.001 282.464 C 205.024 241.644 224.465 215.863 236.323 205.121 C 236.701 204.779 237.14 204.388 237.64 203.949 C 240.727 201.166 244.046 198.92 247.597 197.211 C 254.687 193.842 260.63 191.84 265.427 191.205 C 266.489 191.058 267.277 191.522 267.79 192.596 C 268.536 194.305 266.989 198.553 263.148 205.34 L 262.234 206.952 L 261.045 209.076 L 259.783 211.2 C 258.783 212.86 257.801 214.349 256.838 215.668 C 255.338 217.767 253.124 220.77 250.197 224.676 L 248.441 227.02 L 246.666 229.437 C 245.288 231.244 244.075 232.879 243.026 234.344 C 237.245 242.255 232.471 249.262 228.703 255.365 L 228.502 255.585 C 228.331 255.878 227.99 256.463 227.477 257.342 C 226.977 258.173 226.691 258.637 226.618 258.734 L 225.795 260.272 L 225.63 260.638 C 224.204 263.421 223.241 266.009 222.742 268.402 C 222.596 268.793 222.468 269.305 222.359 269.94 C 222.176 270.868 222.085 271.82 222.086 272.797 C 222.051 275.678 222.883 278.217 224.581 280.414 C 224.838 280.755 225.143 281.097 225.498 281.439 C 225.974 281.878 226.505 282.293 227.092 282.684 C 228.911 284.003 230.901 284.833 233.062 285.174 C 245.209 286.785 257.337 277.02 269.444 255.878 C 256.063 269.794 244.628 275.116 235.141 271.844 C 235.092 270.868 235.591 269.55 236.64 267.889 L 236.786 267.596 L 237.993 265.692 L 239.127 263.788 C 240.066 262.177 240.822 260.907 241.395 259.979 L 242.548 258.295 L 243.133 257.416 Z M 377.291 177.069 C 371.863 176.834 366.987 177.441 362.662 178.889 C 361.503 179.28 360.261 179.807 358.934 180.472 C 358.786 179.886 358.484 179.358 358.029 178.889 L 352.118 175.779 L 350.294 174.781 C 349.522 174.468 348.296 174.625 346.616 175.251 C 331.464 183.192 317.716 192.717 305.371 203.826 C 305.179 204.022 305.059 204.354 305.015 204.824 L 304.964 205.47 L 304.965 205.704 L 305.032 205.938 C 305.113 207.229 305.722 208.266 306.857 209.048 C 308.209 209.869 309.833 210.066 311.728 209.636 C 311.979 209.557 312.319 209.401 312.75 209.166 C 313.125 208.971 313.431 208.775 313.67 208.579 C 314.895 207.641 316.296 206.486 317.873 205.117 L 319.967 203.299 L 321.992 201.479 C 325.351 198.506 328.21 196.237 330.57 194.673 C 331.796 194.047 332.352 194.008 332.24 194.556 C 323.401 202.497 313.095 214.408 301.321 230.29 C 289.549 246.172 280.967 258.615 264.659 283.573 C 262.595 287.406 276.398 287.676 277.623 285.798 C 284.984 274.65 290.655 266.513 294.635 261.388 C 295.771 260.919 297.008 260.489 298.348 260.098 C 299.982 259.628 301.656 259.257 303.37 258.983 C 307.855 258.24 312.527 258.103 317.387 258.572 C 320.964 258.924 323.69 260.489 325.566 263.266 C 325.36 260.841 324.291 258.572 322.359 256.46 C 318.541 252.235 312.357 250.846 303.808 252.294 C 302.9 252.45 302.014 252.607 301.152 252.763 C 307.56 243.179 312.964 235.649 317.365 230.173 C 317.739 229.664 318.715 228.412 320.291 226.417 C 321.029 225.439 321.686 224.578 322.265 223.835 C 323.047 222.857 323.802 221.899 324.528 220.96 C 328.589 215.875 332.417 211.356 336.013 207.406 C 346.949 195.358 356.327 187.827 364.148 184.815 C 369.313 182.82 373.417 182.605 376.461 184.17 C 377.609 184.756 378.495 185.538 379.12 186.516 C 379.655 187.337 379.86 188.12 379.735 188.864 L 379.718 189.392 L 379.549 189.979 C 379.401 190.487 379.022 191.172 378.409 192.032 C 377.128 193.792 374.592 196.277 370.802 199.484 C 369.531 200.579 368.073 201.773 366.428 203.064 C 365.939 203.494 365.344 203.983 364.641 204.531 L 363.858 205.117 C 363.607 205.352 363.398 205.528 363.228 205.645 C 362.502 207.523 363.361 209.577 365.804 211.807 C 368.213 213.997 370.514 214.916 372.704 214.564 C 374.656 213.312 376.773 211.65 379.053 209.577 C 381.821 207.073 384.135 204.57 385.996 202.066 C 388.446 198.78 390.067 195.612 390.859 192.56 C 391.867 188.61 391.427 185.03 389.539 181.822 C 387.835 178.928 383.751 177.343 377.291 177.069 Z"
        />
      </svg>
    </div>
    <!-- navbar links and buttons -->
    <div
      class="flex flex-row gap-6 bg-inherit text-inherit dark:bg-inherit dark:text-inherit sm:h-full sm:flex-row-reverse sm:gap-0"
      id="nav-button-container"
    >
      <!-- dark mode toggle -->
      <button @click="toggleIsDark" class="scale-125 sm:scale-100">
        <!-- light mode icon -->
        <svg
          v-if="isDark"
          data-slot="icon"
          fill="none"
          stroke-width="1.5"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"
          ></path>
        </svg>
        <!-- dark mode icon -->
        <svg
          v-else
          data-slot="icon"
          fill="none"
          stroke-width="1.5"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"
          ></path>
        </svg>
      </button>
      <!-- mobile navbar toggle -->
      <button @click="toggleNavShown" class="scale-125 sm:hidden">
        <!-- menu open icon -->
        <svg
          v-show="!navShown"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"
          />
        </svg>
        <!-- menu close icon -->
        <svg
          v-show="navShown"
          data-slot="icon"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18 18 6M6 6l12 12"
          ></path>
        </svg>
      </button>
      <!-- navbar links -->
      <div
        :class="{ hidden: !navShown }"
        class="fixed left-0 top-20 w-full border-b-2 border-b-neutral-900 bg-inherit px-6 text-inherit dark:border-b-neutral-200 dark:bg-inherit dark:text-inherit sm:relative sm:top-0 sm:mx-6 sm:block sm:w-auto sm:border-b-0 sm:px-0 md:mx-8 lg:mx-10"
      >
        <ul
          class="flex flex-col text-lg sm:h-full sm:flex-row sm:justify-center sm:gap-6 md:gap-8 lg:gap-10"
        >
          <li
            class="pb-4 sm:flex sm:h-full sm:place-items-center sm:border-t-transparent sm:pb-0"
            :class="{
              'sm text-indigo-500 transition ease-linear sm:border-y-4 sm:border-b-indigo-500 sm:border-t-transparent':
                isActive('/'),
            }"
          >
            <RouterLink class="flex w-full" @click="toggleNavShown" to="/"
              >Home</RouterLink
            >
          </li>
          <li
            class="pb-4 sm:flex sm:h-full sm:place-items-center sm:border-t-transparent sm:pb-0"
            :class="{
              'sm text-indigo-500 transition ease-linear sm:border-y-4 sm:border-b-indigo-500 sm:border-t-transparent':
                isActive('/experience'),
            }"
          >
            <RouterLink
              class="flex w-full"
              @click="toggleNavShown"
              to="/experience"
              >Experience</RouterLink
            >
          </li>
          <li
            class="pb-6 sm:flex sm:h-full sm:place-items-center sm:border-t-transparent sm:pb-0"
            :class="{
              'sm text-indigo-500 transition ease-linear sm:border-y-4 sm:border-b-indigo-500 sm:border-t-transparent':
                isActive('/projects'),
            }"
          >
            <RouterLink
              class="flex w-full"
              @click="toggleNavShown"
              to="/projects"
              >Projects</RouterLink
            >
          </li>
        </ul>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { isDark } from "../main";
import { computed, ref } from "vue";
import { useRoute } from "vue-router";

import type { Ref } from "vue";

// toggle dark mode, storing updated value
const toggleIsDark = () => {
  isDark.value = !isDark.value;

  // Save the current value to local storage
  localStorage.setItem("isDark", JSON.stringify(isDark.value));
};

//
// track if site navbar is shown (mobile only)
//
const navShown: Ref<boolean> = ref(false);
// toggle value of isDark variable
const toggleNavShown = () => {
  navShown.value = !navShown.value;
};

//
// track if router link is active
//
const route = useRoute();
const isActive = computed(() => (link: string) => route.path === link);
</script>
